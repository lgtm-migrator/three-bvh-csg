{"mappings":"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","sources":["examples/hierarchy.js"],"sourcesContent":["import * as THREE from 'three';\nimport { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js';\nimport { TransformControls } from 'three/examples/jsm/controls/TransformControls.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport {\n\tEvaluator,\n\tlogTriangleDefinitions,\n\tOperation,\n\tOperationGroup,\n\tGridMaterial,\n\tADDITION,\n\tSUBTRACTION,\n} from '..';\n\nwindow.logTriangleDefinitions = logTriangleDefinitions;\n\nconst params = {\n\n\tsnap: true,\n\n\tbrush1Shape: 'box',\n\tbrush1Complexity: 1,\n\tbrush1Color: '#ffffff',\n\n\tbrush2Shape: 'sphere',\n\tbrush2Complexity: 1,\n\tbrush2Color: '#E91E63',\n\n\toperation: SUBTRACTION,\n\twireframe: false,\n\tdisplayBrushes: true,\n\tdisplayControls: true,\n\tshadows: true,\n\tvertexColors: false,\n\tflatShading: false,\n\tgridTexture: false,\n\tuseGroups: true,\n\n\tenableDebugTelemetry: true,\n\tdisplayIntersectionEdges: false,\n\tdisplayTriangleIntersections: false,\n\tdisplayBrush1BVH: false,\n\tdisplayBrush2BVH: false,\n\n};\n\nlet renderer, camera, scene, gui, outputContainer;\nlet controls, transformControls;\nlet light;\nlet csgEvaluator;\n\nlet result, root, gridMat;\n\ninit();\n\nasync function init() {\n\n\tconst bgColor = 0x111111;\n\n\toutputContainer = document.getElementById( 'output' );\n\n\t// renderer setup\n\trenderer = new THREE.WebGLRenderer( { antialias: true } );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setClearColor( bgColor, 1 );\n\trenderer.shadowMap.enabled = true;\n\trenderer.shadowMap.type = THREE.PCFSoftShadowMap;\n\trenderer.outputEncoding = THREE.sRGBEncoding;\n\tdocument.body.appendChild( renderer.domElement );\n\n\t// scene setup\n\tscene = new THREE.Scene();\n\n\t// lights\n\tlight = new THREE.DirectionalLight( 0xffffff, 1 );\n\tlight.position.set( - 1, 2, 3 );\n\tscene.add( light, light.target );\n\tscene.add( new THREE.AmbientLight( 0xb0bec5, 0.1 ) );\n\n\t// shadows\n\tconst shadowCam = light.shadow.camera;\n\tlight.castShadow = true;\n\tlight.shadow.mapSize.setScalar( 4096 );\n\tlight.shadow.bias = 1e-5;\n\tlight.shadow.normalBias = 1e-2;\n\n\tshadowCam.left = shadowCam.bottom = - 2.5;\n\tshadowCam.right = shadowCam.top = 2.5;\n\tshadowCam.updateProjectionMatrix();\n\n\t// camera setup\n\tcamera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 50 );\n\tcamera.position.set( 1, 2, 4 );\n\tcamera.far = 100;\n\tcamera.updateProjectionMatrix();\n\n\t// controls\n\tcontrols = new OrbitControls( camera, renderer.domElement );\n\n\ttransformControls = new TransformControls( camera, renderer.domElement );\n\ttransformControls.setSize( 0.75 );\n\ttransformControls.addEventListener( 'dragging-changed', e => {\n\n\t\tcontrols.enabled = ! e.value;\n\n\t} );\n\ttransformControls.addEventListener( 'objectChange', e => {\n\n\t\tif ( params.snap ) {\n\n\t\t\tconst o = transformControls.object;\n\t\t\to.position.x = Math.floor( o.position.x * 1e1 ) * 1e-1;\n\t\t\to.position.y = Math.floor( o.position.y * 1e1 ) * 1e-1;\n\t\t\to.position.z = Math.floor( o.position.z * 1e1 ) * 1e-1;\n\n\t\t}\n\n\t} );\n\tscene.add( transformControls );\n\n\t// bunny mesh has no UVs so skip that attribute\n\tcsgEvaluator = new Evaluator();\n\tcsgEvaluator.attributes = [ 'position', 'normal' ];\n\tcsgEvaluator.useGroups = false;\n\n\tgridMat = new GridMaterial();\n\tgridMat.color.set( 0xffc400 ).convertSRGBToLinear();\n\n\troot = new Operation( new THREE.BoxBufferGeometry( 10, 5, 0.5 ), gridMat );\n\n\t{\n\n\t\tconst hole = new Operation( new THREE.CylinderBufferGeometry( 0.5, 0.5, 1, 20 ), gridMat );\n\t\thole.operation = SUBTRACTION;\n\t\thole.rotateX( Math.PI / 2 );\n\n\t\tconst hole2 = new Operation( new THREE.BoxBufferGeometry( 1, 3, 1 ), gridMat );\n\t\thole2.operation = SUBTRACTION;\n\t\thole2.position.y = - 1.5;\n\n\t\tconst doorGroup = new OperationGroup();\n\t\tdoorGroup.add( hole, hole2 );\n\t\troot.add( doorGroup );\n\t\ttransformControls.attach( doorGroup );\n\n\t}\n\n\t{\n\n\t\tconst hole = new Operation( new THREE.BoxBufferGeometry( 2, 1.75, 2 ), gridMat );\n\t\thole.operation = SUBTRACTION;\n\n\t\tconst frame = new Operation( new THREE.BoxBufferGeometry( 2, 1.75, 0.2 ), gridMat );\n\t\tframe.operation = ADDITION;\n\n\t\tconst hole2 = new Operation( new THREE.BoxBufferGeometry( 1.9, 1.65, 2 ), gridMat );\n\t\thole2.operation = SUBTRACTION;\n\n\t\tconst bar1 = new Operation( new THREE.BoxBufferGeometry( 2, 0.1, 0.1 ), gridMat );\n\t\tbar1.operation = ADDITION;\n\n\t\tconst bar2 = new Operation( new THREE.BoxBufferGeometry( 0.1, 2, 0.1 ), gridMat );\n\t\tbar2.operation = ADDITION;\n\n\t\tconst windowGroup = new OperationGroup();\n\t\twindowGroup.add( hole, frame, hole2, bar1, bar2 );\n\t\twindowGroup.position.x = - 3;\n\t\troot.add( windowGroup );\n\n\t}\n\n\t{\n\n\t\tconst hole = new Operation( new THREE.BoxBufferGeometry( 2, 1.75, 2 ), gridMat );\n\t\thole.operation = SUBTRACTION;\n\n\t\tconst frame = new Operation( new THREE.BoxBufferGeometry( 2, 1.75, 0.2 ), gridMat );\n\t\tframe.operation = ADDITION;\n\n\t\tconst hole2 = new Operation( new THREE.BoxBufferGeometry( 1.9, 1.65, 2 ), gridMat );\n\t\thole2.operation = SUBTRACTION;\n\n\t\tconst bar1 = new Operation( new THREE.BoxBufferGeometry( 2, 0.1, 0.1 ), gridMat );\n\t\tbar1.operation = ADDITION;\n\n\t\tconst bar2 = new Operation( new THREE.BoxBufferGeometry( 0.1, 2, 0.1 ), gridMat );\n\t\tbar2.operation = ADDITION;\n\n\t\tconst windowGroup = new OperationGroup();\n\t\twindowGroup.add( hole, frame, hole2, bar1, bar2 );\n\t\twindowGroup.position.x = 3;\n\t\troot.add( windowGroup );\n\n\t}\n\n\t// gui\n\tgui = new GUI();\n\tgui.add( params, 'snap' );\n\tgui.add( params, 'displayControls' );\n\tgui.add( params, 'shadows' );\n\n\twindow.addEventListener( 'resize', function () {\n\n\t\tcamera.aspect = window.innerWidth / window.innerHeight;\n\t\tcamera.updateProjectionMatrix();\n\n\t\trenderer.setSize( window.innerWidth, window.innerHeight );\n\n\t}, false );\n\n\twindow.addEventListener( 'keydown', function ( e ) {\n\n\t\tswitch ( e.code ) {\n\n\t\t\tcase 'KeyW':\n\t\t\t\ttransformControls.setMode( 'translate' );\n\t\t\t\tbreak;\n\t\t\tcase 'KeyE':\n\t\t\t\ttransformControls.setMode( 'rotate' );\n\t\t\t\tbreak;\n\t\t\tcase 'KeyR':\n\t\t\t\ttransformControls.setMode( 'scale' );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} );\n\n\trender();\n\n}\n\nfunction render() {\n\n\trequestAnimationFrame( render );\n\n\tconst startTime = window.performance.now();\n\n\tif ( result ) {\n\n\t\tresult.geometry.dispose();\n\t\tresult.parent.remove( result );\n\n\t}\n\n\tresult = csgEvaluator.evaluateHierarchy( root );\n\tresult.material = gridMat;\n\tscene.add( result );\n\tresult.position.z = 5;\n\tscene.add( root );\n\n\tconst deltaTime = window.performance.now() - startTime;\n\toutputContainer.innerText = `${ deltaTime.toFixed( 3 ) }ms`;\n\n\n\tlight.castShadow = params.shadows;\n\n\ttransformControls.enabled = params.displayControls;\n\ttransformControls.visible = params.displayControls;\n\n\trenderer.render( scene, camera );\n\n}\n\n\n\n"],"names":["$ilwiq","parcelRequire","window","logTriangleDefinitions","$4CEV9","$7cdee9df2c38e2c6$var$params","snap","brush1Shape","brush1Complexity","brush1Color","brush2Shape","brush2Complexity","brush2Color","operation","SUBTRACTION","wireframe","displayBrushes","displayControls","shadows","vertexColors","flatShading","gridTexture","useGroups","enableDebugTelemetry","displayIntersectionEdges","displayTriangleIntersections","displayBrush1BVH","displayBrush2BVH","$7cdee9df2c38e2c6$var$renderer","$7cdee9df2c38e2c6$var$camera","$7cdee9df2c38e2c6$var$scene","$7cdee9df2c38e2c6$var$gui","$7cdee9df2c38e2c6$var$outputContainer","$7cdee9df2c38e2c6$var$controls","$7cdee9df2c38e2c6$var$transformControls","$7cdee9df2c38e2c6$var$light","$7cdee9df2c38e2c6$var$csgEvaluator","$7cdee9df2c38e2c6$var$result","$7cdee9df2c38e2c6$var$root","$7cdee9df2c38e2c6$var$gridMat","$7cdee9df2c38e2c6$var$render","requestAnimationFrame","startTime","performance","now","geometry","dispose","parent","remove","evaluateHierarchy","material","add","position","z","deltaTime","innerText","toFixed","castShadow","enabled","visible","render","async","document","getElementById","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","setClearColor","shadowMap","type","PCFSoftShadowMap","outputEncoding","sRGBEncoding","body","appendChild","domElement","Scene","DirectionalLight","set","target","AmbientLight","shadowCam","shadow","camera","mapSize","setScalar","bias","normalBias","left","bottom","right","top","updateProjectionMatrix","PerspectiveCamera","far","$5Rd1x","OrbitControls","$fUhpq","TransformControls","addEventListener","e","value","o","object","x","Math","floor","y","Evaluator","attributes","GridMaterial","color","convertSRGBToLinear","Operation","BoxBufferGeometry","hole","CylinderBufferGeometry","rotateX","PI","hole2","doorGroup","OperationGroup","attach","frame","ADDITION","bar1","bar2","windowGroup","$jiuw3","GUI","aspect","code","setMode","$7cdee9df2c38e2c6$var$init"],"version":3,"file":"hierarchy.aa51a717.js.map"}